jQuery(document).ready(function(d){d(".gst-sortable").sortable();d(".gst-sortable").disableSelection();g();d(".gst_date_input").datepicker({dateFormat:"M dd"});d(".gst_pricing_input").on("change",function(){d(this).attr("value",d(this).val())});d("#meta_pricing_model_list").on("sortupdate",function(m,n){h(m,d(this))});d(".gst-sort-edit-delete").click(function(m){d(this).parent().parent().remove()});d("#meta_pricing_model_list .gst-sort-edit-delete").click(function(m){d(this).parent().parent().remove();h(m,d(this))});d("#post").submit(function(){});var b;d(".gst-sort-edit-image-upload").click(function(m){l(m,d(this))});d(".gst-sort-edit-image-add").click(function(n){var m=atob(d(this).siblings(".gst_clone_template").val());d(this).parent().parent().children().filter(".gst-sortable").append(m);d(this).parent().parent().children().filter(".gst-sortable").children().last().find(".gst-sort-edit-delete").click(function(){d(this).parent().parent().remove()});d(this).parent().parent().children().filter(".gst-sortable").children().last().find(".gst-sort-edit-image-upload").click(function(){l(n,d(this))});d(this).parent().parent().children().filter(".gst-sortable").children().last().find(".gst_clear_input_target").val("");d(this).parent().parent().children().filter(".gst-sortable").children().last().find(".gst-sort-edit-image-upload").trigger("click")});d(".gst-sort-edit-add").click(function(){var m=atob(d(this).siblings(".gst_clone_template").val());d(this).parent().parent().children().filter(".gst-sortable").append(m);d(this).parent().parent().children().filter(".gst-sortable").children().last().find("input").attr("value","");d(this).parent().parent().children().filter(".gst-sortable").children().last().find(".gst-sort-edit-delete").click(function(){d(this).parent().parent().remove()})});d(".gst-sort-edit-pricing-add").click(function(n){var m=atob(d(this).siblings(".gst_clone_template").val());d(this).parent().parent().children().filter(".gst-sortable").append(m);d(this).parent().parent().children().filter(".gst-sortable").children().last().find("input").attr("value","");h(n,d(this))});d(".option-tree-setting-body").append('<a class="ot_setting_body_done">Done</a>');c(d("#meta_room_amenity_select").val());e(d("#meta_room_pricing_select").val());d("#meta_room_amenity_select").change(function(){c(this.value)});d("#meta_room_pricing_select").change(function(){e(this.value)});d(".ot_setting_body_done").click(function(){d('.option-tree-setting-body[style="display: block;"]').css("display","none")});d(".option-tree-list-item-add").click(function(){setTimeout(function(){d('.option-tree-setting-body[style="display: block;"]').append('<a class="ot_setting_body_done">Done</a>');d('.option-tree-setting-body[style="display: block;"] .ot_setting_body_done').click(function(){d('.option-tree-setting-body[style="display: block;"]').css("display","none")})},500)});function g(){d.ajax({url:hsp_admin_objectl10n.wpsiteinfo.site_url+"/wp-admin/admin-ajax.php",data:{action:"hospitality_ajax",fn:"get_post_edit_options"},dataType:"JSON",success:function(n){if(n.errorData!=null&&n.errorData=="true"){k(n)}var m=n;d(".gst_countable").simplyCountable({counter:"#gst_counter",countType:"characters",maxCount:m.room_excerpt_max_char_count,strictMax:false,overClass:"gst-excerpt-over",countDirection:"down"})},error:function(m){console.log(m)}})}function c(m){if(m!=null&&m!=""){d.ajax({url:hsp_admin_objectl10n.wpsiteinfo.site_url+"/wp-admin/admin-ajax.php",data:{action:"hospitality_ajax",fn:"get_amenity_set_list",postID:m},dataType:"JSON",success:function(n){if(n.errorData!=null&&n.errorData=="true"){k(n)}a(n)},error:function(n){console.log(n)}})}else{a("")}}function a(o){var n=".adm_amenity_set_list";var m="#amenity_list_panel";d(n).empty();if(o==""){d(n).append("<p>"+hsp_admin_objectl10n.note_no_amnenity_set_selected+"</p>");return}d(n).append('<div id="'+m+'">');d(n).append("<ul>");for(i in o){d(n).append("<li>"+o[i]+"</li>")}d(n).append("</ul>");d(n).append("</div>")}function e(m){if(m!=null&&m!=""){d.ajax({url:hsp_admin_objectl10n.wpsiteinfo.site_url+"/wp-admin/admin-ajax.php",data:{action:"hospitality_ajax",fn:"get_pricing_model",postID:m},dataType:"JSON",success:function(n){if(n.errorData!=null&&n.errorData=="true"){k(n)}j(n)},error:function(n){alert(hsp_admin_objectl10n.get_pricing_model_error+n.responseText.substring(0,500));console.log(n)}})}else{j("")}}function j(n){var o=".adm_pricing_model";var m="pricing_model_panel";d(o).empty();if(n==""){d(o).append("<p>"+hsp_admin_objectl10n.note_no_pricing_model_selected+"</p>");return}var p='<div id="'+m+'">';p+='<ul id="pricing_model">';for(i in n){p+="<li>"+n[i].title+"</li><p>";if(n[i].dateRange1!=""){p+=n[i].dateRange1}if(n[i].dateRange2!=""){p+=", "+n[i].dateRange2}if(n[i].dateRange3!=""){p+=", "+n[i].dateRange3}p+='<span class="hsp_room_price">'+n[i].price+"</span></p>"}p+="</ul>";p+="</div>";d(o).append(p)}function l(n,m){n.preventDefault();m.siblings(".gst_image_url_target").addClass("gst-set-media-target");m.siblings("a").children("img").addClass("gst-set-media-thumbnail-target");b=wp.media.frames.meta_image_frame=wp.media({library:{type:"image"}});b.on("select",function(){var o=b.state().get("selection").first().toJSON();d(".gst-set-media-target").val(o.url);d(".gst-set-media-target").removeClass("gst-set-media-target");d(".gst-set-media-thumbnail-target").attr("src",o.url);d(".gst-set-media-thumbnail-target").removeClass("gst-set-media-thumbnail-target")});b.open()}function h(n,m){d("#meta_pricing_model_list").children().each(function(o,r){var q=d(r).html();var p="meta_pricing_model_list["+o+"]";var s=q.replace(/meta_pricing_model_list\[[0-9]*\]/g,p);s='<li class="ui-state-default">'+s+"</li>";d(this).replaceWith(s)});d(".gst_date_input").removeClass("hasDatepicker");d(".gst_date_input").attr("id","");d(".gst_date_input").datepicker({dateFormat:"M dd"});d(".gst_pricing_input").on("change",function(){d(this).attr("value",d(this).val())});d("#meta_pricing_model_list .gst-sort-edit-delete").click(function(){d(this).parent().parent().remove();h(n,d(this))})}function f(n,m){alert("test function")}function k(m){console.log(m)}});